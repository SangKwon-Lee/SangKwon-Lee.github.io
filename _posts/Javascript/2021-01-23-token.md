---
layout: post
title: 'token 개념 정리를 스프린트로 해보자'
date: 2021-01-23 12:00:30  +0800
categories: [Javascript, auth]
tags: [javascript, token]
---

이번에는 token 대한 개념을  
스프린트를 통해 복습하려고 한다.

내가 복습하려고 쓰는 글이기에  
나만 이해할 수 있을 글이 될 것 같다.

그리고, 스프린트 과제에는 대부분의 기본 뼈대 파일과 코드가 작성되어 있다.  
그래서 과정이 상세하지 않을 수도 있음!!  
일단 나는 내가 작성한 부분만 복습할 뿐..

---

## **session vs token**

기존 세션 인증 방식은 **서버에 유저 정보를 담는 방식**이었다.  
하지만 이건 서버에 부담이 간다. 매 요청마다 세션 아이디와 데이터베이스를 살펴보기 때문이다.  
그래서 이 부담을 클라이언트에게 넘겨주는 방법이 토큰 기반 인증이다.

클라이언트에게 토큰을 주고, 토큰을 가지고 있는 클라이언트를 토큰을 통해 서버에서 제공하는 데이터를 볼 수 있다.  
그런데 인증에 사용되는 정보를 클라이언트한테 줘도 괜찮은 이유는 암호화 해서 담기 때문이다.

---

## **JWT란?**

Json Web Token의 약자. Json 포맷으로 사용자 정보를 저장하는 토큰이다.

**Header.payload.signature 이렇게 나눈다.**

- Header - 어떤 종류의 토큰인지, 어떤 알고리즘으로 암호화 했는지,
- payload - 유저의 정보, 권한이 있는지, 나머지 정보
- Signature - Header, Payload를 base64로 인코딩한 값과 salt값을 조합한 암호화 값.

## **JWT의 종류**

Access Token과 Refresh Token이 있다.  
Access Token은 보호된 정보에 접근할 수 있는 권한부여에 사용된다.  
사용자는 로그인시 이 두 가지 토큰을 모두 받지만 실제 사용하는 건 Access Token이다.

두 가지를 모두 주는 이유는 Access token이 해킹당할 우려가 있기에, Access token의 유효기간을 짧게 주고,  
만료되면 refresh token을 이용해 다시 access token을 발급 받기 위함이다.

---

기본 뼈대는 모두 작성되어 있다.  
index.js / evn / models /migrations 등등.  
그래서 우리는 서버에서는 컨트롤러만 작성할 것이다.

---

# **Token Loign 코드 작성**
